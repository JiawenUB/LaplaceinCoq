\documentclass[a4paper,11pt]{article}
\usepackage[utf8]{inputenc}
\input{prelude}
\input{ldef}
\usepackage{eucal}
\usepackage{url}
\usepackage{tikz}
\usepackage{amsfonts,amsmath}
\begin{document}

\title{Verifying Snapping Mechanism - Connecting Ideal and Flopt}
\author{}

\date{}

\maketitle
In order to verify the differential privacy proeprty of the snapping mechanism\cite{mironov2012significance}, we follow the logic rules designed from \cite{barthe2016proving} and connecting it with the floating point computation semantics.

\section{Connecting Coupling Logic with Floating Point Computation}
\begin{figure}[h]
\begin{mathpar}
\inferrule*[right = FloptUnif]
{
\rvalu^1 = \floaten(\fvalu^1)
\and
\rvalu^2 = \floaten(\fvalu^2)
}
{
	\vdash 
	\fvalu^1 \samplel \mu \trsto (e^{-k_1}\rvalu^1, e^{k_1}\rvalu^1)
	\sim_{(k_1 + k_2)+\epsilon, 0} 
	\fvalu^2 \samplel \mu \trsto (e^{-k_2}\rvalu^2, e^{k_2}\rvalu^2)
	: \top \Rightarrow  e^{-\epsilon} \rvalu^2 \leq \rvalu^1 \leq e^{\epsilon} \rvalu^2
}
\end{mathpar}
\caption{Rules of Connecting Coupling Logic with Floating Point Semantics}
\label{logic_rule}
\end{figure}

This rule is interprated as: when $\fvalu^1$ is sampled from distribution $\mu$ and can be transited to $\rvalu^1$ in snap-flopt transition semantics 
with error range $(e^{-k_1}\rvalu^1, e^{k_1}\rvalu^1)$;
and $\fvalu^2$ is sampled from distribution $\mu$ and can be transited to $\rvalu^2$ in snap-flopt transition semantics 
with error range $(e^{-k_2}\rvalu^2, e^{k_2}\rvalu^2)$,
if we have the postcondition $ e^{-\epsilon} \rvalu^2 \leq \rvalu^1 \leq e^{\epsilon} \rvalu^2$,
then the privacy loss in the floating point semantics are $(k_1 + k_2 + \epsilon)$.

\begin{thm}[The $\snap$ mechanism is $\epsilon-$differentially private]
\end{thm}

\begin{figure}[h]
\begin{mathpar}
\inferrule*[right = AxUnif]
{
\rvalu^1 = \floaten(\fvalu^1)
\and
\rvalu^2 = \floaten(\fvalu^2)
}
{
	\vdash 
	\fvalu^1 \samplel \mu 
	\trsto (e^{-12B\epsilon \eta}\rvalu^1, e^{12B\epsilon \eta}\rvalu^1)
	\sim_{24B\epsilon \eta +\epsilon, 0} 
	\fvalu^2 \samplel \mu 
	\trsto (e^{-12B\epsilon \eta}\rvalu^2, e^{12B\epsilon \eta}\rvalu^2)
	: \top \Rightarrow  e^{-\epsilon} \rvalu^2 \leq \rvalu^1 \leq e^{\epsilon} \rvalu^2
}
\and
\inferrule*[right = AxNull]
{
}
{
	y_1 = f(a_1) + \frac{1}{\epsilon} \times  S \times \ln(\fvalu^1)
	\sim_{24B\epsilon \eta +\epsilon, 0} 
	y_2 = f(a_2) + \frac{1}{\epsilon} \times  S \times \ln(\fvalu^2)
	 : 
	 \\
	e^{-\epsilon} \rvalu^2 \leq \rvalu^1 \leq e^{\epsilon} \rvalu^2 \land
	 a_1 = a_2 + 1 \land f(a_1) = f(a_2) + 1  \land |k + f(a_1) - f(a_2) | \leq 1  \Rightarrow y_1 + k = y_2 
}
\and
\inferrule*[right = Comp]
{
\cdots
}
{
	\fvalu^1 \samplel \mu;
	r_1 = \clamp(\round{f(a_1) + \frac{1}{\epsilon} \times  S \times \ln(\fvalu^1)}_{\Lambda})
	\sim_{\epsilon, 0}
	\fvalu^2 \samplel \mu;
	r_1 = \clamp(\round{f(a_2) + \frac{1}{\epsilon} \times  S \times \ln(\fvalu^2)}_{\Lambda})
	: 
	\\
	a_1 = a_2 + 1 \land f(a_1) = f(a_2) + 1  \land |k + f(a_1) - f(a_2) | \leq 1  \Rightarrow r_1 + k = r_2 
}
\end{mathpar}
\caption{Coupling Derivation of two $\snap$ mechanisms: $\snap(a_1)$, $\snap(a_2)$}
\label{derivation_snap}
\end{figure}

\newpage
\bibliographystyle{plain}
\bibliography{verifysnap.bib}



\end{document}















